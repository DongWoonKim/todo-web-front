{"ast":null,"code":"// import HelloWorld from './components/HelloWorld.vue'\nimport TodoHeader from './components/common/TodoHeader.vue';\nimport TodoFooter from './components/common/TodoFooter.vue';\nimport TodoInput from './components/todo-core/TodoInput.vue';\nimport TodoList from './components/todo-core/TodoList.vue';\nimport SignUp from './components/login/SignUp.vue';\nimport SignIn from './components/login/SignIn.vue';\nimport Axios from 'axios'; // import { inject, toRefs } from \"vue\";\n\nexport default {\n  name: 'App',\n  components: {\n    'TodoHeader': TodoHeader,\n    'TodoFooter': TodoFooter,\n    'TodoInput': TodoInput,\n    'TodoList': TodoList,\n    'SignUp': SignUp,\n    'SignIn': SignIn\n  },\n\n  data() {\n    return {\n      user: '',\n      todoItems: [],\n      signUpModal: false,\n      signInModal: false\n    };\n  },\n\n  methods: {\n    addTodo(todoItem) {\n      // 로컬 스토리지에 데이터를 추가하는 로직\n      localStorage.setItem(todoItem, todoItem);\n      this.todoItems.push(todoItem);\n      let obj = {};\n      obj.item = todoItem;\n      Axios.post('http://localhost:8080/todo', JSON.stringify(obj), this.axiosConfig).then(function (response) {\n        console.log('res', response);\n      }).catch(function (error) {\n        console.log('res', error);\n      });\n    },\n\n    headEvent(key) {\n      if (key === 'login') {\n        this.signInModal = true;\n      } else if (key === 'logout') {\n        // 서버로 요청을 날리면 서버에선 refreshToken 테이블에서 아예 지워버린다.\n        // let obj = {};\n        console.log('this user id', this.$store.state.loginStateInfo.userId); // this.$store.dispatch( 'SIGNOUT' );\n\n        /*\n        this.$store.dispatch( 'SIGNIN', obj, this.axiosConfig ).then( ( res ) => {\n           self.$store.state.loginStateInfo.accessToken = res.data.accessToken;\n          self.$store.state.loginStateInfo.refreshToken = res.data.accessToken;\n           // 로그인 창을 닫는다.\n          self.modalEvent( 'modalClose' );\n          // header 상태 유지를 위해 TodoHeader 페이지에 이벤트를 발생시킨다.\n          self.emitter.emit( 'resSignin' );\n         }).catch(( err ) => (\n          console.log( 'sigin err', err.message ),\n          alert('존재하지 않거나 입력하신 ID or 비밀번호가 일치하지 않습니다!')\n        ));\n        */\n      } else if (key === 'signUp') {\n        this.signUpModal = true;\n      }\n    },\n\n    modalEvent(key) {\n      if (key === 'modalClose') {\n        this.signUpModal = false;\n        this.signInModal = false;\n      } else if (key === 'signUp') {\n        this.signInModal = false;\n        this.signUpModal = true;\n      }\n    },\n\n    clearAll() {\n      localStorage.clear();\n      this.todoItems = [];\n    },\n\n    removeTodo(todoItem, index) {\n      localStorage.removeItem(todoItem);\n      this.todoItems.splice(index, 1);\n    },\n\n    async handleClickSignIn() {\n      try {\n        const googleUser = await this.$gAuth.signIn();\n\n        if (!googleUser) {\n          return null;\n        }\n\n        console.log(\"googleUser\", googleUser);\n        this.user = googleUser.getBasicProfile().getEmail();\n        console.log(\"getId\", this.user);\n        console.log(\"getBasicProfile\", googleUser.getBasicProfile());\n        console.log(\"getAuthResponse\", googleUser.getAuthResponse());\n        console.log(\"getAuthResponse\", this.$gAuth.instance.currentUser.get().getAuthResponse());\n        console.log('Vue3GoogleOauth.isAuthorized', this.Vue3GoogleOauth.isAuthorized);\n      } catch (error) {\n        //on fail do something\n        console.error(error);\n        return null;\n      } finally {\n        this.signInModal = false;\n      }\n    },\n\n    async handleClickSignOut() {\n      try {\n        await this.$gAuth.signOut();\n        console.log(\"isAuthorized\", this.Vue3GoogleOauth.isAuthorized);\n        this.user = \"\";\n      } catch (error) {\n        console.error(error);\n      }\n    }\n\n  },\n\n  /*\n  setup(props) {\n    const { isSignIn } = toRefs(props);\n    const Vue3GoogleOauth = inject(\"Vue3GoogleOauth\");\n    const handleClickLogin = () => {};\n    return {\n      Vue3GoogleOauth,\n      handleClickLogin,\n      isSignIn,\n    };\n  },\n  */\n  created() {\n    /*\n    let Vue3GoogleOauth = inject(\"Vue3GoogleOauth\");\n    console.log(\n      \"getAuthResponse vue vue \",\n      this.$gAuth\n    );\n    */\n    // console.log('Vue3GoogleOauth.isAuthorized1', this.Vue3GoogleOauth.isAuthorized);\n    if (localStorage.length > 0) {\n      for (let i = 0; i < localStorage.length; ++i) {\n        this.todoItems.push(localStorage.key(i));\n      }\n    }\n\n    let check = this.$store.getters.GET_TOKEN;\n\n    if (check.refresh === 'undefined') {\n      this.$store.dispatch('SIGNOUT', this.axiosConfig);\n    } else if ( // access token 재발급\n    (check.access === '' || check.access === null || check.access === 'null' || check.access === 'undefined') && check.refresh !== '' && check.refresh !== null && check.refresh !== 'null' && check.refresh !== 'undefined') {\n      this.$store.dispatch('REFRESH_TOKEN', this.axiosConfig).then(() => {\n        console.log('refresh token::');\n      }).catch(err => console.log('sigin err', err.message));\n    }\n  }\n\n};","map":{"version":3,"mappings":"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","names":["TodoHeader","TodoFooter","TodoInput","TodoList","SignUp","SignIn","Axios","name","components","data","user","todoItems","signUpModal","signInModal","methods","addTodo","todoItem","localStorage","setItem","push","obj","item","post","JSON","stringify","axiosConfig","then","response","console","log","catch","error","headEvent","key","$store","state","loginStateInfo","userId","modalEvent","clearAll","clear","removeTodo","index","removeItem","splice","handleClickSignIn","googleUser","$gAuth","signIn","getBasicProfile","getEmail","getAuthResponse","instance","currentUser","get","Vue3GoogleOauth","isAuthorized","handleClickSignOut","signOut","created","length","i","check","getters","GET_TOKEN","refresh","dispatch","access","err","message"],"sourceRoot":"","sources":["/Users/kdw/Documents/todo/todo-front/src/App.vue"],"sourcesContent":["<!-- https://velog.io/@ddpound/Vue-SpringBoot-HTTP-%ED%86%B5%EC%8B%A0-%ED%85%8C%EC%8A%A4%ED%8A%B8cors%EA%B0%92-%ED%97%88%EC%9A%A9 -->\n<template>\n  <TodoHeader v-on:headEvent=\"headEvent\"/>\n  <TodoInput v-on:addTodo=\"addTodo\"/>\n  <TodoList v-bind:propsdata=\"todoItems\"\n    @removeTodo=\"removeTodo\"/>\n  <TodoFooter v-on:removeAll=\"clearAll\"/>\n  <!-- 회원가입 모달 -->\n  <SignUp v-if=\"signUpModal\" v-on:modalEvent=\"modalEvent\"></SignUp>\n  <!-- 로그인 모달 -->\n  <SignIn v-if=\"signInModal\" v-on:modalEvent=\"modalEvent\"></SignIn>\n\n\n  <!-- 로그인 모달 : ouath version -->\n  <!--\n  <Modal v-if=\"signInModal\">\n    <template #header>\n      <div class=\"modalClose\" >\n        <i\n        class=\"closeModalBtn fas fa-times\"\n        aria-hidden=\"true\"\n        @click=\"signInModal = false\"\n        style=\"font-size:3rem;\"\n        ></i>\n      </div>\n      <h1>연동</h1>\n    </template>\n    <template #body>\n      <button\n        @click=\"handleClickSignIn\"\n        type=\"button\"\n        class=\"btn btn-Google btn-lg\">\n        <i class=\"fa fa-google-plus animated infinite tada\"></i> Google+\n      </button>\n    </template>\n  </Modal>\n-->\n\n</template>\n\n<script>\n// import HelloWorld from './components/HelloWorld.vue'\nimport TodoHeader from './components/common/TodoHeader.vue'\nimport TodoFooter from './components/common/TodoFooter.vue'\nimport TodoInput from './components/todo-core/TodoInput.vue'\nimport TodoList from './components/todo-core/TodoList.vue'\nimport SignUp from './components/login/SignUp.vue'\nimport SignIn from './components/login/SignIn.vue'\nimport Axios from 'axios'\n// import { inject, toRefs } from \"vue\";\nexport default {\n  name: 'App',\n  components: {\n    'TodoHeader' : TodoHeader,\n    'TodoFooter' : TodoFooter,\n    'TodoInput' : TodoInput,\n    'TodoList' : TodoList,\n    'SignUp' : SignUp,\n    'SignIn' : SignIn\n  },\n  data() {\n    return {\n      user: '',\n      todoItems: [],\n      signUpModal : false,\n      signInModal : false\n    }\n  },\n  methods: {\n    addTodo(todoItem) {\n      // 로컬 스토리지에 데이터를 추가하는 로직\n      localStorage.setItem(todoItem, todoItem);\n      this.todoItems.push(todoItem);\n      let obj = {};\n      obj.item = todoItem;\n      Axios.post('http://localhost:8080/todo', JSON.stringify( obj ), this.axiosConfig)\n        .then(function(response) {\n          console.log('res', response);\n        })\n        .catch(function(error) {\n          console.log('res', error);\n        });\n    },\n    headEvent(key) {\n      if (key === 'login') {\n        this.signInModal = true;\n      } else if ( key === 'logout' ) {\n\n\n        // 서버로 요청을 날리면 서버에선 refreshToken 테이블에서 아예 지워버린다.\n        // let obj = {};\n        console.log( 'this user id', this.$store.state.loginStateInfo.userId )\n        // this.$store.dispatch( 'SIGNOUT' );\n\n\n        /*\n        this.$store.dispatch( 'SIGNIN', obj, this.axiosConfig ).then( ( res ) => {\n\n          self.$store.state.loginStateInfo.accessToken = res.data.accessToken;\n          self.$store.state.loginStateInfo.refreshToken = res.data.accessToken;\n\n          // 로그인 창을 닫는다.\n          self.modalEvent( 'modalClose' );\n          // header 상태 유지를 위해 TodoHeader 페이지에 이벤트를 발생시킨다.\n          self.emitter.emit( 'resSignin' );\n\n        }).catch(( err ) => (\n          console.log( 'sigin err', err.message ),\n          alert('존재하지 않거나 입력하신 ID or 비밀번호가 일치하지 않습니다!')\n        ));\n        */\n\n\n      } else if ( key === 'signUp' ) {\n        this.signUpModal = true;\n      }\n    },\n    modalEvent(key) {\n      if ( key === 'modalClose' ) {\n        this.signUpModal = false;\n        this.signInModal = false;\n      } else if ( key === 'signUp' ) {\n        this.signInModal = false;\n        this.signUpModal = true;\n      }\n    },\n    clearAll() {\n      localStorage.clear();\n      this.todoItems = [];\n    },\n    removeTodo(todoItem, index) {\n      localStorage.removeItem( todoItem );\n      this.todoItems.splice( index, 1 );\n    },\n    async handleClickSignIn(){\n      try {\n        const googleUser = await this.$gAuth.signIn();\n        if (!googleUser) {\n          return null;\n        }\n        console.log(\"googleUser\", googleUser);\n        this.user = googleUser.getBasicProfile().getEmail();\n        console.log(\"getId\", this.user);\n        console.log(\"getBasicProfile\", googleUser.getBasicProfile());\n        console.log(\"getAuthResponse\", googleUser.getAuthResponse());\n        console.log(\n          \"getAuthResponse\",\n          this.$gAuth.instance.currentUser.get().getAuthResponse()\n        );\n        console.log('Vue3GoogleOauth.isAuthorized', this.Vue3GoogleOauth.isAuthorized);\n      } catch (error) {\n        //on fail do something\n        console.error(error);\n        return null;\n      } finally {\n        this.signInModal = false;\n      }\n    },\n    async handleClickSignOut() {\n      try {\n        await this.$gAuth.signOut();\n        console.log(\"isAuthorized\", this.Vue3GoogleOauth.isAuthorized);\n        this.user = \"\";\n      } catch (error) {\n        console.error(error);\n      }\n    },\n  },\n  /*\n  setup(props) {\n    const { isSignIn } = toRefs(props);\n    const Vue3GoogleOauth = inject(\"Vue3GoogleOauth\");\n    const handleClickLogin = () => {};\n    return {\n      Vue3GoogleOauth,\n      handleClickLogin,\n      isSignIn,\n    };\n  },\n  */\n  created() {\n    /*\n    let Vue3GoogleOauth = inject(\"Vue3GoogleOauth\");\n    console.log(\n      \"getAuthResponse vue vue \",\n      this.$gAuth\n    );\n    */\n    // console.log('Vue3GoogleOauth.isAuthorized1', this.Vue3GoogleOauth.isAuthorized);\n    if ( localStorage.length > 0 ) {\n      for ( let i = 0; i < localStorage.length; ++i ) {\n        this.todoItems.push( localStorage.key(i) );\n      }\n    }\n    let check = this.$store.getters.GET_TOKEN;\n\n    if ( check.refresh === 'undefined' ) {\n        this.$store.dispatch( 'SIGNOUT', this.axiosConfig );\n    } else if ( // access token 재발급\n      ( check.access === '' ||\n        check.access === null ||\n        check.access === 'null' ||\n        check.access === 'undefined' )\n        &&\n      ( check.refresh !== '' &&\n        check.refresh !== null &&\n        check.refresh !== 'null' &&\n        check.refresh !== 'undefined' )\n    ) {\n      this.$store.dispatch( 'REFRESH_TOKEN', this.axiosConfig ).then( () => {\n        console.log('refresh token::')\n      }).catch(( err ) => (\n        console.log( 'sigin err', err.message )\n      ));\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '~styles/Nomalize.scss';\n@import '~styles/CommonStyle.scss';\nbody {\n  text-align: center;\n  background-color: #F6F6F8;\n}\ninput {\n  border-style: groove;\n  width: 200px;\n}\nbutton {\n  border-style: groove;\n}\n.shadow {\n  box-shadow: 5px 10px 10px rgba(0, 0, 0, 0.03);\n}\n.test{ display:flex; justify-content: center; align-items: center; height:100vh; }\n.btn {\n  margin: 40px;\n}\n.btn.btn-Google {\n  background-color: transparent;\n  color: #666A73;\n  border-color: #ee1010;\n  border-size: 2px;\n  border-radius: 0;\n  outline: 0;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}